<!DOCTYPE html>
<html>
  <head>
    <title>Snake Game</title>
    <!DOCTYPE html>
    <html>
      <head>
        <title>Snake Game</title>
        <style>
          body {
            display: flex;
            flex-direction: column;
            align-items: center;
          }
          #canvas {
            border: solid 1px #333;
            background-color: #eee;
            margin: 10px auto;
            display: block;
          }
          #reset-button {
            font-size: 16px;
            font-family: Arial;
            padding: 5px 10px;
            cursor: pointer;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.2s, transform 0.2s;
            box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.2);
          }
          #reset-button:hover {
            background-color: #ffcc33;
            transform: scale(1.1);
          }
          h1 {
            text-align: center;
            margin-top: 20%;
            font-size: 48px;
            letter-spacing: 3px;
          }
          p {
            font-size: 40px;
            font-family: Arial;
            margin: 10px;
          }

          button {
            margin-top: 20px;
            font-size: 36px;
            padding: 20px 40px;
            border: none;
            border-radius: 50px;
            background-color: #333;
            color: white;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
            box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.2);
          }
          button:hover {
            background-color: #ffcc33;
            transform: scale(1.1);
          }
        </style>
      </head>
      <body>
        <h1>Snake</h1>
        <canvas id="canvas" width="400" height="400"></canvas>
        <script>
          var canvas = document.getElementById("canvas");
          var ctx = canvas.getContext("2d");
          var blockSize = 10;
          var widthInBlocks = canvas.width / blockSize;
          var heightInBlocks = canvas.height / blockSize;
          var score = 0;
          var intervalId;
          var snake;
          var apple;

          function init() {
            snake = new Snake();
            apple = new Apple();
            apple.draw();
            intervalId = setInterval(gameLoop, 100);
          }

          function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            snake.move();
            snake.draw();
            apple.draw();
            drawScore();
            if (snake.checkCollision()) {
              gameOver();
            }
          }

          function drawScore() {
            // Update the <p> tag with the score value
            document.getElementById("score").innerHTML = "Score: " + score;
          }

          function gameOver() {
            clearInterval(intervalId);
            ctx.font = "40px Arial";
            ctx.fillStyle = "red";
            ctx.textAlign = "center";
            ctx.fillText("Game Over", canvas.width / 2, canvas.height / 2);
          }

          function Snake() {
            this.segments = [
              [6, 4],
              [5, 4],
              [4, 4],
            ];
            this.direction = "right";
            this.nextDirection = "right";
            this.draw = function () {
              for (var i = 0; i < this.segments.length; i++) {
                drawBlock(ctx, this.segments[i]);
              }
            };
            this.move = function () {
              var head = this.segments[0].slice();
              this.direction = this.nextDirection;
              switch (this.direction) {
                case "right":
                  head[0]++;
                  break;
                case "down":
                  head[1]++;
                  break;
                case "left":
                  head[0]--;
                  break;
                case "up":
                  head[1]--;
                  break;
              }
              this.segments.unshift(head);
              if (this.checkCollision()) {
                gameOver();
              }
              if (
                head[0] === apple.position[0] &&
                head[1] === apple.position[1]
              ) {
                score++;
                apple.move();
              } else {
                this.segments.pop();
              }
            };
            this.checkCollision = function () {
              var head = this.segments[0];
              var body = this.segments.slice(1);
              var wallCollision =
                head[0] < 0 ||
                head[0] >= widthInBlocks ||
                head[1] < 0 ||
                head[1] >= heightInBlocks;
              var selfCollision = false;
              for (var i = 0; i < body.length; i++) {
                if (head[0] === body[i][0] && head[1] === body[i][1]) {
                  selfCollision = true;
                  break;
                }
              }
              return wallCollision || selfCollision;
            };
            this.setDirection = function (newDirection) {
              if (this.direction === "up" && newDirection === "down") {
                return;
              } else if (
                this.direction === "right" &&
                newDirection === "left"
              ) {
                return;
              } else if (this.direction === "down" && newDirection === "up") {
                return;
              } else if (
                this.direction === "left" &&
                newDirection === "right"
              ) {
                return;
              }
              this.nextDirection = newDirection;
            };
          }
          function Apple() {
            this.position = [
              Math.floor(Math.random() * (widthInBlocks - 1)),
              Math.floor(Math.random() * (heightInBlocks - 1)),
            ];
            this.draw = function () {
              drawCircle(ctx, this.position);
            };
            this.move = function () {
              this.position = [
                Math.floor(Math.random() * (widthInBlocks - 1)),
                Math.floor(Math.random() * (heightInBlocks - 1)),
              ];
            };
          }

          function drawBlock(ctx, position) {
            var x = position[0] * blockSize;
            var y = position[1] * blockSize;
            ctx.fillRect(x, y, blockSize, blockSize);
          }

          function drawCircle(ctx, position) {
            var x = position[0] * blockSize + blockSize / 2;
            var y = position[1] * blockSize + blockSize / 2;
            ctx.beginPath();
            ctx.arc(x, y, blockSize / 2, 0, Math.PI * 2, false);
            ctx.fill();
          }

          document.addEventListener("keydown", function (event) {
            var key = event.keyCode;
            var newDirection;
            switch (key) {
              case 37:
                newDirection = "left";
                break;
              case 38:
                newDirection = "up";
                break;
              case 39:
                newDirection = "right";
                break;
              case 40:
                newDirection = "down";
                break;
              default:
                return;
            }
            snake.setDirection(newDirection);
          });

          init();

          function reset() {
            clearInterval(intervalId);
            score = 0;
            snake = new Snake();
            apple = new Apple();
            apple.draw();
            intervalId = setInterval(gameLoop, 100);
          }
        </script>
        <p id="score">Score: 0</p>
        <button onclick="reset()">Reset</button>
        <br />
        <div style="text-align: center">
          <a href="index.html"><button>Home</button></a>
        </div>
      </body>
    </html>
  </head>
</html>
